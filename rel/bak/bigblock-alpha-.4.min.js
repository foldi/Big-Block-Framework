var BigBlock={};BigBlock.Sprites=[];BigBlock.curentFrame=1;BigBlock.clickBlock=0;
BigBlock.Char=function(){return{configure:function(){this.alias="Char";this.x=80;this.y=1;this.state="start";this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.word_id=this.value="B";this.render=-1;this.clock=0;this.index=BigBlock.Sprites.length;this.angle=Math.degreesToRadians(0);this.life=this.step=this.vel=0;this.className="white";this.color_index=this.className+"0";this.color_max=0;this.pulse_rate=10;this.anim_frame_duration=this.anim_frame=0;this.anim_loop=1;this.anim_state="stop";this.action=
function(){};this.afterDie=null},getAnim:function(b){return[{frm:{duration:1,pix:[{c:b,i:0}]}}]},getPix:function(b){b=b[0];if(typeof b.frm.pix[0]!="undefined")b.frm.pix[0].c=this.color_index;return b.frm},run:function(){switch(this.state){case "stop":break;case "start":this.state="run";break;case "run":this.action.call(this);break}this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.img=this.getPix(this.anim,this.color_index);this.color_index=this.life!==0?this.className+Math.round(this.color_max*
(this.clock/this.life)):this.className+(this.color_max-Math.round(this.color_max*Math.abs(Math.cos(this.clock/this.pulse_rate))));if(this.clock++>=this.life&&this.life!==0)BigBlock.Timer.killObject(this);else this.clock++},start:function(){this.state="start"},stop:function(){this.state="stop"},die:function(b){if(typeof b=="function")this.afterDie=b;BigBlock.Timer.killObject(this)},goToFrame:function(b,a,d){return goToFrame(b,a,d)}}}();
BigBlock.CharSimple=function(){return{create:function(b){var a=BigBlock.clone(BigBlock.Char);a.configure();if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=b[d];b=BigBlock.Color.getPalette();for(var c in b.classes)if(b.classes[c].name==a.className){a.color_max=b.classes[c].val.length-1;break}a.color_index=a.className+"0";a.anim=a.getAnim(a.color_index);a.char_pos=BigBlock.CharPresets.getChar(a.value);BigBlock.Sprites.push(a)}}}();
BigBlock.Color=function(){function b(){var e=0;for(var f in a.classes)if(a.classes.hasOwnProperty(f))e+=a.classes[f].val.length;return e}var a={classes:[{name:"white",val:["rgb(255,255,255)"]},{name:"black",val:["rgb(0,0,0)"]},{name:"grey",val:["rgb(90,90,90)"]},{name:"red",val:["rgb(255,0,0)"]},{name:"magenta",val:["rgb(255,0,255)"]},{name:"blue",val:["rgb(0,0,255)"]},{name:"cyan",val:["rgb(0,255,255)"]},{name:"green",val:["rgb(0,255,0)"]},{name:"yellow",val:["rgb(255,255,0)"]},{name:"orange",val:["rgb(255,126,0)"]},
{name:"brown",val:["rgb(160,82,45)"]},{name:"pink",val:["rgb(238,130,238)"]}]};a.classes[a.classes.length]={name:{},val:[]};for(var d="",c=255;c>-1;c--)d+=c!==0?"rgb("+c+", "+c+", "+c+");":"rgb("+c+", "+c+", "+c+")";d=d.split(";");a.classes[a.classes.length-1].name="white_black";a.classes[a.classes.length-1].val=[];for(c in d)if(d.hasOwnProperty(c))a.classes[a.classes.length-1].val[c]=d[c];return{current_class:0,build:function(){var e=a;for(var f in e.classes[this.current_class].val)e.classes[this.current_class].val.hasOwnProperty(f)&&
document.styleSheets[document.styleSheets.length-1].insertRule("div.color"+e.classes[this.current_class].name+f+" {background-color:"+e.classes[this.current_class].val[f]+";}",0);this.current_class++;BigBlock.Loader.update({total:Math.round(document.styleSheets[document.styleSheets.length-1].cssRules.length/b()*100)});return document.styleSheets[document.styleSheets.length-1].cssRules.length<b()?false:true},add:function(e){try{if(typeof e=="undefined")throw new Error(console.log("Color.add: params are required"));
}catch(f){BigBlock.Log.display(f.name+": "+f.message)}for(var g in e.classes)a.classes.hasOwnProperty(g)&&a.classes.push(e.classes[g])},getPalette:function(){return a}}}();
BigBlock.Emitter=function(){getTransformVariants=function(b,a,d,c,e,f,g,i,l,j,m){var h={};c=Math.ceil(Math.random()*(100-c*100+1));h.life=Math.ceil(d*((100-c)/100));c=Math.ceil(Math.random()*(100-f*100+1));h.vel=e*((100-c)/100);d=[1,-1];e=d[Math.getRamdomNumber(0,1)];h.angle_var=Math.ceil(Math.random()*(g+1))*e;e=d[Math.getRamdomNumber(0,1)];g=0;if(i!=0)g=Math.ceil(Math.random()*i*BigBlock.Grid.pix_dim)*e;if(l==1){i=Math.abs(g)/(i*BigBlock.Grid.pix_dim);h.life=Math.ceil(h.life*(1-i))>0?Math.ceil(h.life*
(1-i)):1}i=d[Math.getRamdomNumber(0,1)];l=Math.floor(Math.random()*j*BigBlock.Grid.pix_dim)*i;if(m==1){i=Math.abs(l)/(j*BigBlock.Grid.pix_dim);h.life=Math.ceil(h.life*(1-i))>0?Math.ceil(h.life*(1-i)):1}h.x=b+g;h.y=a+l;return h};return{create:function(b){var a=BigBlock.clone(BigBlock.Sprite);a.configure();a.x=BigBlock.Grid.width/2;a.y=BigBlock.Grid.height/2+BigBlock.Grid.height/3;a.alias="emitter";a.emission_rate=3;a.p_count=0;a.p_burst=3;a.p_velocity=3;a.p_velocity_spread=1;a.p_angle=270;a.p_angle_spread=
20;a.p_life=100;a.p_life_spread=0.5;a.p_life_offset_x=0;a.p_life_offset_y=0;a.p_gravity=0;a.p_init_pos_spread_x=0;a.p_init_pos_spread_y=0;a.p_spiral_vel_x=0;a.p_spiral_vel_y=0;a.action=function(){};if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=b[d];b=BigBlock.Color.getPalette();for(var c in b.classes)if(b.classes[c].name==a.className){a.color_max=b.classes[c].val.length-1;break}a.anim=[{frm:{duration:1,pix:[]}}];a.run=function(){switch(this.state){case "stop":break;case "start":if(this.clock%
this.emission_rate===0)this.state="emit";this.action.call(this);break;case "emit":for(var e=0;e<this.p_burst;e++){vars=getTransformVariants(this.x,this.y,this.p_life,this.p_life_spread,this.p_velocity,this.p_velocity_spread,this.p_angle_spread,this.p_init_pos_spread_x,this.p_life_offset_x,this.p_init_pos_spread_y,this.p_life_offset_y);BigBlock.Particle.create({alias:"particle",className:this.className,x:vars.x,y:vars.y,life:vars.life,gravity:this.p_gravity,angle:Math.degreesToRadians(this.p_angle+
vars.angle_var),vel:vars.vel,color_max:this.color_max,p_spiral_vel_x:this.p_spiral_vel_x,p_spiral_vel_y:this.p_spiral_vel_y});this.p_count++}this.state="start";break}this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.img=this.getPix(this.anim,this.color_index);if(this.clock++>=this.life&&this.life!==0&&this.state!="dead")BigBlock.Timer.killObject(this);else this.clock++};a.getPix=function(){return[{frm:{duration:1,pix:[{c:"particle",i:0}]}}]};a.start=function(){this.state="start"};a.stop=function(){this.state=
"stop"};BigBlock.Sprites.push(a)}}}();
BigBlock.Grid=function(){return{alias:"Grid",id:"pix_grid",class_name:"pix_grid_container",style:{left:"center",top:"center",position:"absolute",backgroundColor:"transparent",backgroundImage:"",width:"320px",height:"356px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px",borderColor:"#333",borderStyle:"solid",paddingLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",marginLeft:"0px",marginTop:"0px",marginRight:"0px",marginBottom:"0px"},body_backgroundColor:"#000",
width:320,height:356,pix_dim:8,cols:40,rows:44.5,build_start_time:(new Date).getTime(),build_end_time:(new Date).getTime(),build_offset:0,build_section_count:0,build_section_total:22.25,build_rowNum:0,char_width:8,char_height:8,build:function(){for(var b=0,a=0;a<this.cols*this.rows/this.build_section_total;a++){if(b<this.cols)b++;else b=1;a%this.cols===0&&this.build_rowNum++;document.styleSheets[document.styleSheets.length-1].insertRule(".pos"+(a+this.build_offset)+" {left:"+(b-1)*this.pix_dim+"px;top:"+
(this.build_rowNum-1)*this.pix_dim+"px;}",0)}this.build_offset=document.styleSheets[document.styleSheets.length-1].cssRules.length;BigBlock.Loader.update({total:Math.round(document.styleSheets[document.styleSheets.length-1].cssRules.length/(this.cols*this.rows)*100)});end_time=(new Date).getTime();return document.styleSheets[document.styleSheets.length-1].cssRules.length<this.cols*this.rows?false:true},add:function(){this.build_start_time=(new Date).getTime();document.body.innerHTML="<div id='"+this.id+
"' class='"+this.className+"' style=''></div>";for(var b in this.style)if(this.style.hasOwnProperty(b)){var a=this.style[b];switch(b){case "top":switch(a){case "top":a="0px";this.style.top=a;break;case "center":a=window.innerHeight/2-this.height/2-this.style.borderTopWidth.replace("px","")/2-this.style.borderBottomWidth.replace("px","")/2+"px";this.style.top=a;break;case "bottom":a=window.innerHeight-this.height-this.style.borderTopWidth.replace("px","")-this.style.borderBottomWidth.replace("px",
"")+"px";this.style.top=a;break}break;case "left":switch(a){case "left":a="0px";this.style.left=a;break;case "center":a=window.innerWidth/2-this.width/2-this.style.borderLeftWidth.replace("px","")/2-this.style.borderRightWidth.replace("px","")/2+"px";this.style.left=a;break;case "right":a=window.innerWidth-this.width-this.style.borderLeftWidth.replace("px","")-this.style.borderRightWidth.replace("px","")+"px";this.style.left=a;break}break}document.getElementById(this.id).style[b]=a}this.x=this.style.left.replace("px",
"");this.y=this.style.top.replace("px","");b=document.createElement("style");b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b);document.styleSheets[document.styleSheets.length-1].insertRule("body {margin: 0;padding: 0;background-color: "+this.body_backgroundColor+";}",0);document.styleSheets[document.styleSheets.length-1].insertRule("div.color {background-color : transparent;}",0);document.styleSheets[document.styleSheets.length-1].insertRule("div.pix {float:left;width:"+
this.pix_dim+"px;height:"+this.pix_dim+"px;position:absolute;}",0);for(b=0;b<this.cols/4*(this.rows/4);b++){a=document.createElement("div");a.setAttribute("id",b);document.getElementById(this.id).appendChild(a);document.getElementById(b).setAttribute("class","pix color pos"+b)}},setStyles:function(b){if(typeof b!="undefined")if(typeof b.style!="undefined")for(var a in b.style)if(b.style.hasOwnProperty(a))this.style[a]=b.style[a]},setAttributes:function(b){if(typeof b!="undefined")for(var a in b)if(b.hasOwnProperty(a))this[a]=
b[a]},build_char_styles:function(){document.styleSheets[document.styleSheets.length-1].insertRule(".text_bg{background-color: transparent;}",0);document.styleSheets[document.styleSheets.length-1].insertRule(".char{width : 1px;height : 1px;position: absolute;float: left;}",0);for(var b=1,a=0;a<this.char_width*this.char_height;a++){document.styleSheets[document.styleSheets.length-1].insertRule(".char_pos"+(a+1)+"{left:"+b+"px;top:"+(Math.floor(a/8)+1)+"px;}",0);if(b+1<=this.char_width)b++;else b=1}return true}}}();
BigBlock.InputFeedback=function(){return{life:10,className:"white",configure:function(b){if(typeof b!="undefined")for(var a in b)if(b.hasOwnProperty(a))this[a]=b[a]},display:function(b,a){try{if(typeof b=="undefined"||typeof a=="undefined")throw new Error("BigBlock.InputFeedback.display(x, y) requires valid x and y locations");else BigBlock.SpriteSimple.create({alias:"input_feedback",className:this.className,x:b-BigBlock.Grid.x,y:a-BigBlock.Grid.y,life:this.life})}catch(d){BigBlock.Log.display(d.name+
": "+d.message)}},die:function(){BigBlock.Sprites[BigBlock.getObjIdByAlias("input_feedback")].die();delete BigBlock.InputFeedback}}}();
BigBlock.BehaviorPresets=function(){function b(){return{getPreset:function(d){switch(d){case "move_wallCollide":return function(){var c=this.vel*BigBlock.Grid.pix_dim*Math.cos(this.angle),e=this.vel*BigBlock.Grid.pix_dim*Math.sin(this.angle);if(this.x+c>0&&this.x+c<BigBlock.Grid.width)this.x+=c;else{this.vel*=1.5;this.angle+=Math.degreesToRadians(180)}if(this.y+e>0&&this.y+e<BigBlock.Grid.height)this.y+=e;else{this.vel*=1.5;this.angle+=Math.degreesToRadians(180)}if(Math.floor(this.vel--)>0)this.vel--;
else this.vel=0};case "move":return function(){this.x+=8}}}}}var a;return{install:function(){a||(a=b());return a}}}();
BigBlock.CharPresets=function(){function b(){return{getChar:function(d){var c={};switch(d){case " ":c=[];break;case "A":case "a":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:18},{p:19},{p:20},{p:21},{p:25},{p:29},{p:33},{p:37}];break;case "B":case "b":c=[{p:1},{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:18},{p:19},{p:20},{p:25},{p:29},{p:33},{p:34},{p:35},{p:36}];break;case "C":case "c":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "D":case "d":c=[{p:1},{p:2},
{p:3},{p:4},{p:9},{p:13},{p:17},{p:21},{p:25},{p:29},{p:33},{p:34},{p:35},{p:36}];break;case "E":case "e":c=[{p:1},{p:2},{p:3},{p:4},{p:9},{p:17},{p:18},{p:19},{p:25},{p:33},{p:34},{p:35},{p:36}];break;case "F":case "f":c=[{p:1},{p:2},{p:3},{p:4},{p:9},{p:17},{p:18},{p:19},{p:25},{p:33}];break;case "G":case "g":c=[{p:2},{p:3},{p:4},{p:5},{p:9},{p:17},{p:20},{p:21},{p:25},{p:29},{p:34},{p:35},{p:36},{p:37}];break;case "H":case "h":c=[{p:1},{p:5},{p:9},{p:13},{p:17},{p:18},{p:19},{p:20},{p:21},{p:25},
{p:29},{p:33},{p:37}];break;case "I":case "i":c=[{p:2},{p:3},{p:4},{p:11},{p:19},{p:27},{p:34},{p:35},{p:36}];break;case "J":case "j":c=[{p:5},{p:13},{p:21},{p:25},{p:29},{p:26},{p:34},{p:35},{p:36}];break;case "K":case "k":c=[{p:1},{p:5},{p:9},{p:12},{p:17},{p:18},{p:19},{p:25},{p:28},{p:33},{p:37}];break;case "L":case "l":c=[{p:1},{p:9},{p:17},{p:25},{p:33},{p:34},{p:35},{p:36}];break;case "M":case "m":c=[{p:1},{p:5},{p:9},{p:10},{p:12},{p:13},{p:17},{p:19},{p:21},{p:25},{p:29},{p:33},{p:37}];break;
case "N":case "n":c=[{p:1},{p:5},{p:9},{p:10},{p:13},{p:17},{p:19},{p:21},{p:25},{p:28},{p:29},{p:33},{p:37}];break;case "O":case "o":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:21},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "P":case "p":c=[{p:1},{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:18},{p:19},{p:20},{p:25},{p:33}];break;case "Q":case "q":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:19},{p:21},{p:25},{p:28},{p:29},{p:34},{p:35},{p:36},{p:37}];break;case "R":case "r":c=[{p:1},{p:2},{p:3},{p:4},
{p:9},{p:13},{p:17},{p:18},{p:19},{p:20},{p:25},{p:29},{p:33},{p:37}];break;case "S":case "s":c=[{p:2},{p:3},{p:4},{p:5},{p:9},{p:18},{p:19},{p:20},{p:29},{p:33},{p:34},{p:35},{p:36}];break;case "T":case "t":c=[{p:1},{p:2},{p:3},{p:4},{p:5},{p:11},{p:19},{p:27},{p:35}];break;case "U":case "u":c=[{p:1},{p:5},{p:9},{p:13},{p:17},{p:21},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "V":case "v":c=[{p:1},{p:5},{p:9},{p:13},{p:17},{p:21},{p:26},{p:28},{p:35}];break;case "W":case "w":c=[{p:1},{p:4},{p:7},
{p:9},{p:12},{p:15},{p:17},{p:20},{p:23},{p:25},{p:28},{p:31},{p:34},{p:35},{p:37},{p:38}];break;case "X":case "x":c=[{p:1},{p:5},{p:10},{p:12},{p:19},{p:26},{p:28},{p:33},{p:37}];break;case "Y":case "y":c=[{p:1},{p:5},{p:10},{p:12},{p:19},{p:27},{p:35}];break;case "Z":case "z":c=[{p:1},{p:2},{p:3},{p:4},{p:5},{p:12},{p:19},{p:26},{p:33},{p:34},{p:35},{p:36},{p:37}];break;case "1":c=[{p:3},{p:10},{p:11},{p:19},{p:27},{p:35}];break;case "2":c=[{p:1},{p:2},{p:3},{p:4},{p:13},{p:18},{p:19},{p:20},{p:25},
{p:33},{p:34},{p:35},{p:36},{p:37}];break;case "3":c=[{p:1},{p:2},{p:3},{p:4},{p:13},{p:18},{p:19},{p:20},{p:29},{p:33},{p:34},{p:35},{p:36}];break;case "4":c=[{p:3},{p:4},{p:10},{p:12},{p:17},{p:20},{p:25},{p:26},{p:27},{p:28},{p:29},{p:36}];break;case "5":c=[{p:1},{p:2},{p:3},{p:4},{p:5},{p:9},{p:17},{p:18},{p:19},{p:20},{p:29},{p:33},{p:34},{p:35},{p:36}];break;case "6":c=[{p:2},{p:3},{p:4},{p:9},{p:17},{p:18},{p:19},{p:20},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "7":c=[{p:2},{p:3},{p:4},
{p:5},{p:13},{p:20},{p:27},{p:35}];break;case "8":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:18},{p:19},{p:20},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "9":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:18},{p:19},{p:20},{p:21},{p:28},{p:34},{p:35},{p:36}];break;case "0":c=[{p:2},{p:3},{p:4},{p:9},{p:13},{p:17},{p:21},{p:25},{p:29},{p:34},{p:35},{p:36}];break;case "arrow_down":c=[{p:3},{p:11},{p:17},{p:19},{p:21},{p:26},{p:27},{p:28},{p:35}];break;case "arrow_up":c=[{p:3},{p:10},{p:11},{p:12},{p:17},{p:19},
{p:21},{p:27},{p:35}];break;case "arrow_left":c=[{p:3},{p:10},{p:17},{p:18},{p:19},{p:20},{p:21},{p:26},{p:35}];break;case "arrow_right":c=[{p:3},{p:12},{p:17},{p:18},{p:19},{p:20},{p:21},{p:28},{p:35}];break;case "!":c=[{p:3},{p:11},{p:19},{p:35}];break;case "@":c=[{p:2},{p:3},{p:4},{p:9},{p:11},{p:13},{p:17},{p:19},{p:20},{p:21},{p:25},{p:34},{p:35},{p:36}];break;case "#":c=[{p:2},{p:4},{p:9},{p:10},{p:11},{p:12},{p:13},{p:18},{p:20},{p:25},{p:26},{p:27},{p:28},{p:29},{p:34},{p:36}];break;case "$":c=
[{p:2},{p:3},{p:4},{p:5},{p:9},{p:11},{p:18},{p:19},{p:20},{p:27},{p:29},{p:33},{p:34},{p:35},{p:36},{p:43}];break;case "%":c=[{p:1},{p:2},{p:4},{p:9},{p:10},{p:12},{p:19},{p:26},{p:28},{p:29},{p:34},{p:36},{p:37}];break;case "^":c=[{p:3},{p:10},{p:12}];break;case "&":c=[{p:2},{p:3},{p:9},{p:12},{p:18},{p:19},{p:25},{p:29},{p:34},{p:35},{p:36},{p:37}];break;case "*":c=[{p:3},{p:9},{p:11},{p:13},{p:18},{p:19},{p:20},{p:25},{p:27},{p:29},{p:35}];break;case "(":c=[{p:3},{p:10},{p:18},{p:26},{p:35}];
break;case ")":c=[{p:3},{p:12},{p:20},{p:28},{p:35}];break;case "-":c=[{p:18},{p:19},{p:20}];break;case "_":c=[{p:34},{p:35},{p:36},{p:37}];break;case "=":c=[{p:10},{p:11},{p:12},{p:13},{p:26},{p:27},{p:28},{p:29}];break;case "+":c=[{p:3},{p:11},{p:17},{p:18},{p:19},{p:20},{p:21},{p:27},{p:35}];break;case ";":c=[{p:3},{p:27},{p:34}];break;case ":":c=[{p:11},{p:35}];break;case "'":c=[{p:3},{p:10},{p:18}];break;case ",":c=[{p:34},{p:41}];break;case ".":c=[{p:33}];break;case "<":c=[{p:3},{p:10},{p:17},
{p:26},{p:35}];break;case ">":c=[{p:3},{p:12},{p:21},{p:28},{p:35}];break;case "/":c=[{p:4},{p:12},{p:19},{p:26},{p:34}];break;case "?":c=[{p:1},{p:2},{p:3},{p:12},{p:18},{p:19},{p:34}];break;case "{":c=[{p:3},{p:4},{p:11},{p:18},{p:27},{p:35},{p:36}];break;case "}":c=[{p:2},{p:3},{p:11},{p:20},{p:27},{p:34},{p:35}];break;case "[":c=[{p:3},{p:4},{p:11},{p:19},{p:27},{p:35},{p:36}];break;case "]":c=[{p:2},{p:3},{p:11},{p:19},{p:27},{p:34},{p:35}];break;default:try{throw new Error("BigBlock.CharPresets: "+
d+" preset does not exist.");}catch(e){BigBlock.Log.display(e)}break}if(typeof params!="undefined")for(var f in params)if(params.hasOwnProperty(f))em[f]=params[f];return c}}}var a;return{install:function(){a||(a=b());return a}}}();
BigBlock.EmitterPresets=function(){function b(){return{getPreset:function(d,c){var e=BigBlock.Grid,f={};switch(d){case "fire":f={className:"fire",x:e.width/2,y:e.height/1.25,life:0,emission_rate:1,p_burst:16,p_velocity:1.5,p_velocity_spread:0.1,p_angle:270,p_angle_spread:0,p_life:35,p_life_spread:1,p_life_offset_x:1,p_life_offset_y:0,p_gravity:0,p_init_pos_spread_x:4,p_init_pos_spread_y:0,p_spiral_vel_x:0,p_spiral_vel_y:0};break;case "spark":f={className:"fire",x:e.width/2,y:e.height/1.25,life:0,
emission_rate:50,p_burst:1,p_velocity:1.5,p_velocity_spread:1,p_angle:270,p_angle_spread:0,p_life:50,p_life_spread:1,p_life_offset_x:1,p_life_offset_y:0,p_gravity:0,p_init_pos_spread_x:4,p_init_pos_spread_y:0,p_spiral_vel_x:1,p_spiral_vel_y:0};break;case "speak":f={className:"speak",x:e.width/2,y:e.height/2,life:10,emission_rate:10,p_burst:3,p_velocity:1.5,p_velocity_spread:0.75,p_angle:0,p_angle_spread:15,p_life:25,p_life_spread:1,p_life_offset_x:0,p_life_offset_y:0,p_gravity:0,p_init_pos_spread_x:0,
p_init_pos_spread_y:0,p_spiral_vel_x:0,p_spiral_vel_y:0};break;case "trail_red":f={className:"red_black",x:e.width/2,y:e.height/2,life:10,emission_rate:10,p_burst:3,p_velocity:1.5,p_velocity_spread:0.1,p_angle:0,p_angle_spread:10,p_life:35,p_life_spread:1,p_life_offset_x:1,p_life_offset_y:0,p_gravity:0,p_init_pos_spread_x:4,p_init_pos_spread_y:0,p_spiral_vel_x:0,p_spiral_vel_y:0};break;case "trail_white":f={className:"white_black",x:e.width/2,y:e.height/2,life:10,emission_rate:10,p_burst:3,p_velocity:1.5,
p_velocity_spread:0.1,p_angle:0,p_angle_spread:10,p_life:35,p_life_spread:1,p_life_offset_x:1,p_life_offset_y:0,p_gravity:0,p_init_pos_spread_x:4,p_init_pos_spread_y:0,p_spiral_vel_x:0,p_spiral_vel_y:0};break;default:try{throw new Error("BigBlock.EmitterPresets: preset does not exist.");}catch(g){BigBlock.Log.display(g.name+": "+g.message)}break}if(typeof c!="undefined")for(var i in c)if(c.hasOwnProperty(i))f[i]=c[i];return f}}}var a;return{install:function(){a||(a=b());return a}}}();
BigBlock.Loader=function(){return{id:"loader",class_name:"loader_container",style:{left:window.innerWidth/2-50+"px",top:window.innerHeight/2-5+"px",position:"absolute",backgroundColor:"transparent",width:"100px",height:"10px",border:"1px solid #aaa",padding:"2px",textAlign:"center",color:"#fff",fontStyle:"normal",fontFamily:"Verdana, sans-serif",fontSize:"1em",fontVariant:"normal",fontWeight:"normal"},width:100,height:10,format:"percentage",total:0,msg:"&nbsp;",bar_color:"#999",add:function(){document.body.innerHTML=
"<div id='"+this.id+"' class='"+this.class_name+"'><div id='"+this.id+"_bar' class='"+this.class_name+"_bar' style='background-color:"+this.bar_color+";height:"+this.height+"px;'></div></div>";for(var b in this.style)if(this.style.hasOwnProperty(b)){var a=this.style[b];document.getElementById(this.id).style[b]=a}},update:function(b){if(typeof b!="undefined")if(typeof b.total!="undefined")this.total=b.total;b=this.total/100*100;document.getElementById(this.id+"_bar").style.width=b+"px"}}}();
BigBlock.Particle=function(){getTransform=function(b,a,d,c,e,f,g,i,l,j,m){var h={},n=Math.round(Math.cos(f)*j*BigBlock.Grid.pix_dim);j=b*BigBlock.Grid.pix_dim*Math.cos(a)+n;n=Math.round(Math.cos(f)*m*BigBlock.Grid.pix_dim);b=b*BigBlock.Grid.pix_dim*Math.sin(a)+n;if(!(d+j>=BigBlock.Grid.width)){h.x=d+j;h.y=c+b+e*BigBlock.Grid.pix_dim}h.color_index=i+Math.round(l*(f/g));return h};return{create:function(b){var a=BigBlock.clone(BigBlock.Sprite);a.configure();if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=
b[d];a.color_index=a.className+"0";a.anim=[{frm:{duration:1,pix:[{c:this.color_index,i:0}]}}];a.run=function(){switch(this.state){case "stop":break;case "start":var c=getTransform(this.vel,this.angle,this.x,this.y,this.gravity,this.clock,this.life,this.className,this.color_max,this.p_spiral_vel_x,this.p_spiral_vel_y);this.x=c.x;this.y=c.y;this.color_index=c.color_index;this.gravity*=1.08;break;case "dead":break}this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.img=this.getPix(this.anim,this.color_index);
if(this.clock++>=this.life&&this.life!==0&&this.state!="dead")BigBlock.Timer.killObject(this);else this.clock++};a.stop=function(){this.state="stop"};BigBlock.Sprites.push(a)}}}();
BigBlock.RenderMgr=function(){return{renderPix:function(){pixNodes=document.getElementById(BigBlock.Grid.id).childNodes;for(var b=0;b<pixNodes.length;b++)for(pixNodes[b].setAttribute("class","pix color");pixNodes[b].childNodes.length>=1;)pixNodes[b].removeChild(pixNodes[b].firstChild);var a=0;for(b=BigBlock.Sprites.length-1;b>-1;b--)if(BigBlock.Sprites[b].render!==0&&BigBlock.Sprites[b].state!="dead"){var d=0;if(typeof BigBlock.Sprites[b].img!="undefined"&&typeof BigBlock.Sprites[b].img.pix!="undefined")for(d in BigBlock.Sprites[b].img.pix){var c=
BigBlock.Sprites[b].img.pix[d].i+BigBlock.Sprites[b].pix_index;if(c>-1&&c<BigBlock.Grid.cols*BigBlock.Grid.rows){var e=BigBlock.Sprites[b].img.pix[d].c;if(document.getElementById(a))if(BigBlock.Sprites[b].alias=="Char"){document.getElementById(a).setAttribute("class","pix text_bg pos"+c);if(document.getElementById(a).hasChildNodes)for(;document.getElementById(a).childNodes.length>=1;)document.getElementById(a).removeChild(document.getElementById(a).firstChild);c=BigBlock.Sprites[b].char_pos;for(k=
0;k<c.length;k++){var f=document.createElement("div");f.setAttribute("class","char char_pos"+c[k].p+" color"+e);document.getElementById(a).appendChild(f)}}else document.getElementById(a).setAttribute("class","pix color"+e+" pos"+c);else{f=document.createElement("div");f.setAttribute("id",a);document.getElementById(BigBlock.Grid.id).appendChild(f);document.getElementById(a).setAttribute("class","pix color"+e+" pos"+c)}}a++}BigBlock.Sprites[b].render--}},getGridCenterX:function(){return this.grid_width/
2},getGridCenterY:function(){return this.grid_height/2}}}();BigBlock.ScreenEvent=function(){return{create:function(b){this.alias="ScreenEvent";this.click_event=b.click;this.touch_event=b.touchstart;if(typeof b!="undefined"){typeof b.click!="undefined"&&document.addEventListener("click",b.click,false);typeof b.touchstart!="undefined"&&document.addEventListener("touchstart",b.touchstart,false)}this.frameAdvance=b.frameAdvance;this.inputFeedback=b.inputFeedback}}}();
BigBlock.Sprite=function(){function b(a,d,c){try{if(typeof a=="undefined")throw new Error("goToAndPlay(arg, anim_frame, anim) requires a frame number, label or keyword(nextFrame, lastFrame)");}catch(e){BigBlock.Log.display(e.name+": "+e.message)}try{if(typeof d=="undefined")throw new Error("goToAndPlay(arg, anim_frame, anim) requires an anim_frame");}catch(f){BigBlock.Log.display(f.name+": "+f.message)}try{if(typeof c=="undefined")throw new Error("goToAndPlay(arg, anim_frame, anim) requires an anim");
}catch(g){BigBlock.Log.display(g.name+": "+g.message)}switch(typeof a){case "number":try{if(a-1<0||a-1>=c.length)throw new Error("Frame number does not exist.");}catch(i){BigBlock.Log.display(i.name+": "+i.message)}return a-1;case "string":switch(a){case "nextFrame":return d++;case "lastFrame":return d--;default:var l;a:{try{if(typeof a=="undefined")throw new Error("getFrameIndexByLabel(arg, anim) requires a label");}catch(j){BigBlock.Log.display(j.name+": "+j.message)}try{if(typeof c=="undefined")throw new Error("getFrameIndexByLabel(arg, anim) requires an anim");
}catch(m){BigBlock.Log.display(m.name+": "+m.message)}d=0;for(var h in c)if(c.hasOwnProperty(h)){if(a==c[h].frm.label){l=h;break a}d++}try{if(d!==0)throw new Error("Frame label does not exist.");}catch(n){BigBlock.Log.display(n.name+": "+n.message)}}return l}}}return{configure:function(){this.alias="Sprite";this.y=this.x=1;this.state="start";this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.render=-1;this.clock=0;this.index=BigBlock.Sprites.length;this.angle=Math.degreesToRadians(0);this.life=
this.step=this.vel=0;this.className="white";this.color_index=this.className+"0";this.color_max=0;this.pulse_rate=10;this.anim_frame_duration=this.anim_frame=0;this.anim_loop=1;this.anim_state="stop";this.afterDie=null;this.action=function(){}},getAnim:function(a){return[{frm:{duration:1,pix:[{c:a,i:0}]}}]},getPix:function(a){a=a[0];if(typeof a.frm.pix[0]!="undefined")a.frm.pix[0].c=this.color_index;return a.frm},run:function(){switch(this.state){case "stop":break;case "start":this.state="run";break;
case "run":this.action.call(this);break}this.pix_index=BigBlock.getPixIndex(this.x,this.y);this.img=this.getPix(this.anim,this.color_index);this.color_index=this.life!==0?this.className+Math.round(this.color_max*(this.clock/this.life)):this.className+(this.color_max-Math.round(this.color_max*Math.abs(Math.cos(this.clock/this.pulse_rate))));if(this.clock++>=this.life&&this.life!==0)BigBlock.Timer.killObject(this);else this.clock++},start:function(){this.state="start"},stop:function(){this.state="stop"},
die:function(a){if(typeof a=="function")this.afterDie=a;BigBlock.Timer.killObject(this)},goToFrame:function(a,d,c){return b(a,d,c)}}}();
BigBlock.SpriteAdvanced=function(){return{create:function(b){var a=BigBlock.clone(BigBlock.Sprite);a.configure();a.anim=[{frm:{duration:1,pix:[{c:"white0",i:0}]}}];if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=b[d];b=BigBlock.Color.getPalette();for(var c in b.classes)if(b.classes[c].name==a.className){a.color_max=b.classes[c].val.length-1;break}a.getPix=function(e){try{if(typeof e=="undefined")throw new Error("getPix(anim) requires an anim json object");}catch(f){BigBlock.Log.display(f.name+
": "+f.message)}switch(this.anim_state){case "stop":if(typeof e[this.anim_frame]=="undefined")this.anim_frame=0;var g=e[this.anim_frame];if(this.anim_frame_duration===0){g=e[this.anim_frame];typeof g.frm.enterFrame=="function"&&g.frm.enterFrame.call(this)}this.anim_frame_duration++;break;case "play":if(typeof e[this.anim_frame]=="undefined")this.anim_frame=0;g=e[this.anim_frame];if(this.anim_frame_duration<g.frm.duration){if(this.anim_frame_duration===0){g=e[this.anim_frame];typeof g.frm.enterFrame==
"function"&&g.frm.enterFrame.call(this)}this.anim_frame_duration++}else{g=e[this.anim_frame];typeof g.frm.exitFrame=="function"&&g.frm.exitFrame.call(this);this.anim_frame_duration=0;this.anim_frame++;if(typeof e[this.anim_frame]=="undefined")if(this.anim_loop==1)this.anim_frame=0;else{g={frm:{duration:1,pix:[]}};this.die(this);return g}g=e[this.anim_frame]}break}if(typeof g!="undefined")return g.frm};a.start=function(){this.anim_state="start"};a.stop=function(){this.anim_state="stop"};a.goToAndPlay=
function(e){try{if(typeof e=="undefined")throw new Error(console.log("goToAndPlay(arg) requires a frame number, label or keyword(nextFrame, lastFrame)"));}catch(f){BigBlock.Log.display(f.name+": "+f.message)}this.anim_frame=this.goToFrame(e,this.anim_frame,this.anim);this.anim_state="play"};a.goToAndStop=function(e){try{if(typeof e=="undefined")throw new Error(console.log("goToAndStop(arg) requires a frame number, label or keyword(nextFrame, lastFrame)"));}catch(f){BigBlock.Log.display(f.name+": "+
f.message)}this.anim_frame=this.goToFrame(e,this.anim_frame,this.anim);if(typeof e=="number")this.anim_frame_duration=0;this.anim_state="stop"};BigBlock.Sprites.push(a)}}}();
BigBlock.SpriteSimple=function(){return{create:function(b){var a=BigBlock.clone(BigBlock.Sprite);a.configure();if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=b[d];b=BigBlock.Color.getPalette();for(var c in b.classes)if(b.classes[c].name==a.className){a.color_max=b.classes[c].val.length-1;break}a.color_index=a.className+"0";a.anim=a.getAnim(a.color_index);BigBlock.Sprites.push(a)}}}();
BigBlock.TapTimeout=function(){return{timeout_length:3E3,timeout_obj:null,arrow_direction:"up",x:152,y:336,start:function(b){if(typeof b!="undefined")for(var a in b)if(b.hasOwnProperty(a))this[a]=b[a];this.timeout_obj=setTimeout("BigBlock.TapTimeout.display()",this.timeout_length)},display:function(){BigBlock.WordSimple.create({word_id:"tap_timeout_word_tap",x:this.x,y:this.y,value:"tap",className:"white"});switch(this.arrow_direction){case "left":BigBlock.CharSimple.create({word_id:"tap_timeout_arrow",
x:this.x-8,y:this.y,value:"arrow_left",className:"white"});break;case "right":BigBlock.CharSimple.create({word_id:"tap_timeout_arrow",x:this.x+24,y:this.y,value:"arrow_right",className:"white"});break;case "down":BigBlock.CharSimple.create({word_id:"tap_timeout_arrow",x:this.x+8,y:this.y+8,value:"arrow_down",className:"white"});break;default:BigBlock.CharSimple.create({word_id:"tap_timeout_arrow",x:this.x+8,y:this.y-8,value:"arrow_up",className:"white"});break}},stop:function(){clearTimeout(this.timeout_obj);
typeof BigBlock.Sprites[BigBlock.getObjIdByWordId("tap_timeout_word_tap")]!="undefined"&&BigBlock.Sprites[BigBlock.getObjIdByWordId("tap_timeout_word_tap")].die();typeof BigBlock.Sprites[BigBlock.getObjIdByWordId("tap_timeout_arrow")]!="undefined"&&BigBlock.Sprites[BigBlock.getObjIdByWordId("tap_timeout_arrow")].die()},die:function(){this.stop();delete BigBlock.TapTimeout}}}();
BigBlock.Timer=function(){var b=(new Date).getTime();return{alias:"Timer",frame_rate:33,start:(new Date).getTime(),end:(new Date).getTime(),time:0,clock:0,errors:[],build_start:(new Date).getTime(),sprites_to_kill:[],tap_timeout:true,play:function(a){if(typeof a!="undefined")for(var d in a)if(a.hasOwnProperty(d))this[d]=a[d];this.add_char_loader()},add_char_loader:function(){BigBlock.Loader.add();BigBlock.Loader.update();var a=document.createElement("style");a.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(a);
this.build_char()},build_char:function(){BigBlock.Grid.build_char_styles()?this.add_color_loader():setTimeout(this.build_char,1)},add_color_loader:function(){BigBlock.Loader.add();BigBlock.Loader.update();var a=document.createElement("style");a.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(a);this.build_color()},build_color:function(){BigBlock.Color.build()?BigBlock.Timer.add_grid_loader():setTimeout(BigBlock.Timer.build_color,1)},add_grid_loader:function(){BigBlock.Loader.add();
BigBlock.Loader.update();var a=document.createElement("style");a.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(a);for(var d=a=0;d<document.styleSheets.length;d++)if(document.styleSheets[d].cssRules.length>0)if(document.styleSheets[d].cssRules[0].selectorText.search("extGrid")!=-1){a=1;break}if(a!==0){BigBlock.Grid.add();for(d in BigBlock.Sprites)if(BigBlock.Sprites.hasOwnProperty(d))BigBlock.Sprites[d].state="start";BigBlock.Timer.tap_timeout&&BigBlock.TapTimeout.start();
BigBlock.Timer.run()}else BigBlock.Timer.build_grid()},build_grid:function(){if(BigBlock.Grid.build()){BigBlock.Grid.add();for(var a in BigBlock.Sprites)if(BigBlock.Sprites.hasOwnProperty(a))BigBlock.Sprites[a].state="start";BigBlock.Log.display((new Date).getTime()-b+"ms");delete BigBlock.Grid.build;delete BigBlock.Grid.add;delete BigBlock.Loader;delete BigBlock.Timer.add_color_loader;delete BigBlock.Timer.build_color;delete BigBlock.Timer.add_grid_loader;delete BigBlock.Timer.build_grid;delete BigBlock.Timer.play;
BigBlock.Timer.tap_timeout&&BigBlock.TapTimeout.start();BigBlock.Timer.run()}else setTimeout(BigBlock.Timer.build_grid,1)},run:function(){for(var a=0;a<BigBlock.Sprites.length;a++)typeof BigBlock.Sprites[a]=="object"&&typeof BigBlock.Sprites[a].run=="function"&&BigBlock.Sprites[a].run();this.end=(new Date).getTime();this.time=this.end-this.start;if(this.time<=this.frame_rate+1)this.buffer=setTimeout("BigBlock.Timer.render()",this.frame_rate-this.time);else BigBlock.Timer.render();for(a=0;a<this.sprites_to_kill.length;a++)BigBlock.Sprites[this.sprites_to_kill[a]].state=
"dead";for(a=0;a<BigBlock.Sprites.length;a++)if(BigBlock.Sprites[a].state=="dead"){typeof BigBlock.Sprites[a].afterDie=="function"&&BigBlock.Sprites[a].afterDie();BigBlock.Sprites.splice(a,1)}for(a=0;a<BigBlock.Sprites.length;a++)BigBlock.Sprites[a].index=a;this.sprites_to_kill=[]},render:function(){this.clock++;BigBlock.RenderMgr.renderPix(BigBlock.Sprites);this.buffer=setTimeout("BigBlock.Timer.run()",this.frame_rate);this.start=(new Date).getTime()},killObject:function(a){typeof a!="undefined"&&
typeof BigBlock.Sprites[a.index]=="object"&&this.sprites_to_kill.push(a.index)}}}();Math.degreesToRadians=function(b){return Math.PI/180*b};Math.radiansToDegrees=function(b){return 180/Math.PI*b};Math.getRamdomNumber=function(b,a){return Math.floor(Math.random()*(a+1))+b};BigBlock.clone=function(b){function a(){}a.prototype=b;return new a};
BigBlock.getPixIndex=function(b,a){return BigBlock.Grid.pix_dim!==0?Math.floor(b/BigBlock.Grid.pix_dim)+BigBlock.Grid.cols*Math.floor(a/BigBlock.Grid.pix_dim):1};BigBlock.getObjIdByAlias=function(b){for(var a in BigBlock.Sprites)if(BigBlock.Sprites[a].alias==b)return a;return false};BigBlock.getObjIdByWordId=function(b){for(var a in BigBlock.Sprites)if(BigBlock.Sprites[a].word_id==b)return a;return false};
BigBlock.Log=function(){return{display:function(b){try{window.console&&window.console.firebug&&console.log(b)}catch(a){}}}}();BigBlock.checkHasDupes=function(b){var a,d,c;a=[];c=b.pix.length;for(a=0;a<c;a++)for(d=a+1;d<c;d++)if(b.pix.i.i==b.pix.j.i)return a=[b.pix.i,b.pix.j];return false};
BigBlock.Word=function(){return{configure:function(){this.alias="Word";this.word_id="word1";this.x=BigBlock.Grid.width/2;this.y=BigBlock.Grid.height/2;this.value="BIG BLOCK";this.center=false;this.className="white";this.afterDie=null;this.render=0},die:function(b){for(var a in BigBlock.Sprites)BigBlock.Sprites[a].word_id==this.word_id+"_char"&&BigBlock.Timer.killObject(BigBlock.Sprites[a]);if(typeof b=="function")this.afterDie=b;BigBlock.Timer.killObject(this)}}}();
BigBlock.WordSimple=function(){return{create:function(b){var a=BigBlock.clone(BigBlock.Word);a.configure();if(typeof b!="undefined")for(var d in b)if(b.hasOwnProperty(d))a[d]=b[d];b=BigBlock.Color.getPalette();for(d in b.classes)if(b.classes[d].name==a.className){a.color_max=b.classes[d].val.length-1;break}if(a.center)a.x=BigBlock.Grid.width/2-a.value.length*BigBlock.Grid.pix_dim/2;for(d in a.value)BigBlock.CharSimple.create({word_id:a.word_id+"_char",value:a.value[d],x:a.x+d*BigBlock.Grid.pix_dim,
y:a.y,className:a.className});BigBlock.Sprites.push(a)}}}();